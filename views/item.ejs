<html lang="en">
<head>
    <title>items</title>
</head>
<body>
    <div>
        <h2><%= item.name %></h2>
        <h6><%= item.price  %></h6>
        <div>
            <p><%= item.description  %></p>
        </div>
        <a class="delete" data-doc="<%=item._id  %>">delete</a>
    </div>

    <script>
        const deleteItem = document.querySelector('a.delete')

        deleteItem.addEventListener('click', () => {
            const endpoint = `/items/${deleteItem.dataset.doc}`

            fetch(endpoint, {
                method: 'DELETE'
            })
            .then((response)=> response.json())
            .then((data) => window.location.href = data.redirect)
            .catch((err) => {console.log(err)})
        })
    </script>
</body>
</html>